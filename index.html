<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Aniruddhashirahatti.github.io by AniruddhaShirahatti</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>Aniruddha Shirahatti</h1>
        <p></p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/AniruddhaShirahatti" class="button fork"><strong>View On GitHub</strong></a>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h3>
<a name="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a>WELCOME !</h3>

<h3>JSON Parsing in JAVA Code</h3>

<p>EXAMPLE : Consider the JSON data below which is to be parsed.</p>

<pre><code>
{
    "coord": {
        "lon": 72.85,
        "lat": 19.01
    },
    "sys": {
        "message": 0.01,
        "country": "IN",
        "sunrise": 1399077557,
        "sunset": 1399123897
    },
    "weather": [
        {
            "id": 803,
            "main": "Clouds",
            "description": "broken clouds",
            "icon": "04d"
        }
    ],
    "base": "cmc stations",
    "main": {
        "temp": 299.041,
        "temp_min": 299.041,
        "temp_max": 299.041,
        "pressure": 1021.06,
        "sea_level": 1021.95,
        "grnd_level": 1021.06,
        "humidity": 100
    },
    "wind": {
        "speed": 2.86,
        "deg": 320.5
    },
    "clouds": {
        "all": 56
    },
    "dt": 1399102067,
    "id": 1275339,
    "name": "Mumbai",
    "cod": 200
}
</code></pre>

<p>We receive the above JSON data after hitting the URL "http://api.openweathermap.org/data/2.5/weather?q=City,Country" where "City" and  "Country" are the required parameters.</p>

<h3>JSON Parsing in JAVA</h3>
<h4>--> Working with JSON Objects</h4>
<p>In this code, we call the web service which in turn gives the JSON data. This JSON data is immediately parsed.</p>
<p>So, First we connect to the web service, read the data and create an object which stores the parsed JSON data.</p>
<p>See the code below :</p>
<pre><code>
URLConnection url = new URL("http://api.openweathermap.org/data/2.5/weather?q=city,country").openConnection();
InputStream is = url.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
            
JSONParser parser = new JSONParser();
Object obj = parser.parse(isr);
</code></pre>

<p>Now, we we have to create a JSON Object to access its elements.</p>

<pre><code>
JSONObject jsonObject = (JSONObject) obj;
</code></pre>

<p>Here, we convert the object of class Object into JSONObject.</p>
<p>NOW, Consider the JSON object "coord". Here, we create a JSONObject of "coord" and get its elements namely "lon" and "lat" : </p>

<pre><code>
JSONObject coordObj1 = (JSONObject) jsonObject.get("coord");        
Double lon=(Double) coordObj1.get("lon");      
Double lat=(Double) coordObj1.get("lat");
System.out.println("Longitude :"+lon+", Latitude :"+lat);
</code></pre>

<p>Similarly, we have to deal with all the JSON objects and get their elements.</p>

<h4>--> Working with JSON Arrays</h4>
<p>The process of getting the elements in a JSON Array is same as that of JSON Objects. But here, since its an array we use iterator to retrieve all the elements inside this JSONArray.</p>

<pre><code>
JSONArray mJsonArray =(JSONArray) jsonObject.get("weather") ;
JSONObject mJsonObject = new JSONObject();
for (int i = 0; i < mJsonArray.size(); i++) 
{
    mJsonObject = (JSONObject) mJsonArray.get(i);
    Long id = (Long) mJsonObject.get("id");
    String main = (String) mJsonObject.get("main");
    String description = (String) mJsonObject.get("description");
    String icon = (String) mJsonObject.get("icon");
    System.out.println("Weather_ID :"+id+",        Weather_Main :"+main+",        Weather_Description :"+description+",         Weather_Icon :"+icon);
}             
</code></pre>


<h3>NOTE : Add "json-simple-1.1.1.jar" to your library.</h3>
<p>Download "json-simple-1.1.1.jar" from here ----> <a href="https://code.google.com/p/json-simple/downloads/detail?name=json-simple-1.1.1.jar&can=2&q=" class="button fork"><strong>json-simple-1.1.1.jar</strong></a></p>


<h3>FULL Source code DOWNLOAD</h3>
<p>If the code is helpful for you, please download full source code from here----> <a href="https://github.com/AniruddhaShirahatti/JSON-parsing-in-java" class="button fork"><strong>JSON Parsing in JAVA code</strong></a> </p>
<p>Thank you !</p>


      <footer>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>